# WordNest (Milestone Project 4)

## Table of contents

- [WordNest (Milestone Project 4)](#wordnest-milestone-project-4)
  - [Table of contents](#table-of-contents)
- [Purpose](#purpose)
- [UX Design](#ux-design)
  - [User stories](#user-stories)
    - [As a **first time user**](#as-a-first-time-user)
    - [As a **returning user**](#as-a-returning-user)
  - [UAC](#uac)
  - [Structure](#structure)
- [Wireframes](#wireframes)
- [Design](#design)
  - [Design](#design-1)
    - [Colour Scheme](#colour-scheme)
    - [Typography](#typography)
    - [Images](#images)
    - [Visual Effects](#visual-effects)
      - [Onscroll Animation](#onscroll-animation)
- [Architecture](#architecture)
- [Features](#features)
- [Testing](#testing)
  - [Manual Testing](#manual-testing)
    - [Navbar](#navbar)
    - [Footer](#footer)
    - [Home page](#home-page)
    - [Dictionary page](#dictionary-page)
    - [Profile page](#profile-page)
    - [Forms](#forms)
  - [Unit testing](#unit-testing)
    - [Python unit tests](#python-unit-tests)
    - [JS unit tests](#js-unit-tests)
  - [Code validation](#code-validation)
  - [Lighthouse](#lighthouse)
- [Technologies](#technologies)
  - [Languages](#languages)
  - [Programs, frameworks, libraries](#programs-frameworks-libraries)
- [Deployment](#deployment)
  - [Github](#github)
  - [Heroku](#heroku)
  - [Fork GitHub Repo](#fork-github-repo)
  - [Clone GitHub Repo](#clone-github-repo)
- [Credits](#credits)
  - [Media](#media)
  - [Design Template](#design-template)
  - [Code](#code)
  - [Acknowledgements](#acknowledgements)

<small><i><a href='http://ecotrust-canada.github.io/markdown-toc/'>Table of contents generated with markdown-toc</a></i></small>

# Purpose

[Table of contents](#table-of-contents)

# UX Design

## User stories

Target audiences:

### As a **first time user**

### As a **returning user**

[Back to the top](#table-of-contents)

## UAC

User Acceptance Criteria based on the user stories:

[Back to the top](#table-of-contents)

## Structure

[Back to the top](#table-of-contents)

# Wireframes

[Back to the Top](#help-u-website-milestone-project-4)

# Design

## Design

### Colour Scheme

### Typography

### Images

The images in this project were sourced from [Unsplash](https://unsplash.com/) and [Undraw](https://undraw.co/), generated by [Midjourney](https://midjourney.com/home/?callbackUrl=%2Fapp%2F) and [This Person Doesn't exist](https://this-person-does-not-exist.com) or created by me. The logo is designed in [Hatchful](https://www.shopify.com/tools/logo-maker)

### Visual Effects

#### Onscroll Animation

[AOS (Animate on Scroll)](https://michalsnik.github.io/aos/) i

[Back to the top](#table-of-contents)

# Architecture

[Back to the top](#table-of-contents)

# Features

[Back to the top](#table-of-contents)

# Testing

## Manual Testing

### Navbar

- :heavy_check_mark: Navbar layout displays correctly on different screen sizes.
- :heavy_check_mark: All links are working correctly.
- :heavy_check_mark: The burger menu functions correctly on mobile devices.
- :heavy_check_mark: Anonymous users do not see links that are only for authenticated users.


### Footer

- :heavy_check_mark: Footer layout displays correctly on different screen sizes.
- :heavy_check_mark: All links are working correctly.
- :heavy_check_mark: The link to the GitHub repo opens in a new tab.

### Home page

- For anonymous users:
  - :heavy_check_mark: The home page displays correctly on different screen sizes.
  - :heavy_check_mark: All links are working correctly.
  - :heavy_check_mark: Shows **Sign Up** button.
  - :heavy_check_mark: Shows **Sign up with Google and Facebook** icons.
  - :heavy_check_mark: Shows "Features" section.

- For authenticated users:
  - :heavy_check_mark: All links are working correctly.
  - :heavy_check_mark: Shows dictionaries list.
  - :heavy_check_mark: Shows **Create dictionary** button.
  - :heavy_check_mark: Shows **Delete dictionary** icon near each dictionary.


### Dictionary page

- For anonymous users:
  - :heavy_check_mark: Get redirect to the welcome page.

- For authenticated users:
  - :heavy_check_mark: All links are working correctly.
  - :heavy_check_mark: The dictionary page displays correctly on different screen sizes.
  - :heavy_check_mark: User can add, delete and search words.

### Profile page

- For anonymous users:
  - :heavy_check_mark: Get redirect to the welcome page.

- For authenticated users:
  - :heavy_check_mark: All links are working correctly.
  - :heavy_check_mark: The dictionary page displays correctly on different screen sizes..
  - :heavy_check_mark: User can change the password.
  - :heavy_check_mark: User can delete the account.
  - :heavy_check_mark: User can seen general information about his account.
  - :heavy_check_mark: User can see amount of his dictionaries and delete them.

### Forms
All forms were created using one template so that they have the same styles and functionality. An anonymous user can see all forms except **Set Password**, **Change Password**, and **Create Dictionary** forms.

- For all users:
  - :heavy_check_mark: All forms are displayed correctly on different screen sizes.
  - :heavy_check_mark: All form fields, buttons, and hints work correctly.

[Back to the top](#table-of-contents)

## Unit testing

### Python unit tests

### JS unit tests

JS unit testing was performed through [Jest](https://jestjs.io/).

[Back to the top](#table-of-contents)

## Code validation

[Back to the top](#table-of-contents)

## Lighthouse

[Back to the top](#table-of-contents)

# Technologies

## Languages

-   Python+Django, JavaScript, HTML, CSS

## Programs, frameworks, libraries

-   [Django](https://www.djangoproject.com/) for backend and frontend functionality.
-   [PostgreSQL](https://www.postgresql.org/) relational database.
-   [Psycopg](https://www.psycopg.org/) PostgreSQL adapter for Python.
-   [Google Fonts](https://fonts.google.com/) for typography.
-   [GitHub](https://GitHub.com/) to host the source code.
-   [Heroku](https://www.heroku.com/) to deploy and host the live app.
-   [Jest](https://jestjs.io/) for JS unit-testing.
-   [Unittest](https://docs.python.org/3/library/unittest.html) for Python unit-testing.
-   [TinyJPG](https://tinyjpg.com/) to optimise images for readme.
-   [Favicon.io](https://www.favicon.io/) to create the website favicon.
-   [W3C HTML Markup Validator](https://validator.w3.org/) to validate HTML code.
-   [W3C Jigsaw CSS Validator](https://jigsaw.w3.org/css-validator/) to validate CSS code.
-   [JS Hint](https://jshint.com/) to validate JS code.
-   [django-livereload-server](https://github.com/tjwalch/django-livereload-server) - automatically reload django server when a static file was changed.
-   [django-allauth](https://docs.allauth.org/en/latest/introduction/index.html) - help to set up social authentication.
-   [dj-database-url](https://github.com/jazzband/dj-database-url/) - allows to use URLs to connect to DB
-   [js-cookie](https://github.com/js-cookie/js-cookie/) - JavaScript API for handling cookies
-   [Tippy.js](https://atomiks.github.io/tippyjs/) is the complete tooltip, popover, dropdown, and menu solution for the web
    [Back to the top](#table-of-contents)
-   [django-htmx] - make using htmx in Django easier.

# Deployment

## Github

[Back to the top](#table-of-contents)

## Heroku

The WordNest project was deployed on a Heroku hosting server. The following steps outline the process of deploying the WordNest project and can be applied to deploy another Django project with minor adjustments:

1.  Navigate to your [Heroku dashboard](https://dashboard.heroku.com/apps) and create a new app with a unique name.

2.  Install [decouple](https://pypi.org/project/python-decouple/) to manage environment variables.

    ```
    pip install python-decouple
    ```

    <sub>**Note**: Decouple is a useful library that allows you to separate local and production settings for Django projects.</sub>

3.  Create a `.env` file in the root directory of your project.

4.  Add the following text to `.gitignore` file. This makes `git` ignore `.env` file.

    ```
    .env
    ```

5.  Add `DEBUG=True` to the `.env` file.

6.  Import `decouple` in the `settings.py`.

    ```python
    from decouple import config
    ```

7.  Replace `DEBUG` variable in the `settings.py` with the following code:

    ```python
    DEBUG = config("DEBUG", default=False, cast=bool)
    ```

8.  Install `gunicorn` as a production-ready webserver for Heroku with command.

    ```
    pip install gunicorn
    ```

9.  Create a file named `Procfile` at the root directory of the project.

10. Add following command to `Procfile` to run your server in production.

    ```
    web: gunicorn wordnest.wsgi
    ```

    <sub>**Note**: Replace `wordnest` with your project name</sub>

11. In the `settings.py` file update the `ALLOWED_HOSTS` variable.

    ```python
    ALLOWED_HOSTS = ['127.0.0.1', '.herokuapp.com']
    ```

12. Install [dj-database-url](https://pypi.org/project/dj-database-url/).

    ```
    pip install dj-database-url
    ```

13. Import `dj-database-url` in `settings.py`.

    ```python
    import dj_database_url
    ```

14. Install [psycopg2](https://pypi.org/project/psycopg2/) to connect to PostgreSQL database.

    ```
    pip install psycopg2
    ```

15. In the `settings.py` replace `DATABASES` with the following code:

    ```python
    if DEBUG:
        DATABASES = {
        "default": {
            "ENGINE": "django.db.backends.postgresql",
            "NAME": config("DB_NAME"),
            "USER": config("DB_USER"),
            "PASSWORD": config("DB_PASSWORD"),
            "HOST": config("DB_HOST"),
            "PORT": config("DB_PORT"),
            }
        }
    else:
        DATABASES = {
            'default': dj_database_url.parse(config('DATABASE_URL'))
        }
    ```

    <sub>**Note**: Replace `if` clause with your own database for local development</sub>

16. In the `.env` file update the `DEBUG` environment variable and add `DATABASE_URL` new one.

    ```
    DEBUG=False
    DATABASE_URL=add_URL_of_a_remote_database
    ```

    <sub>**Note**: For the WordNest I used database URL provided by `Code Institute` but you can use other database hosting services< such as [Amazon RDS for PostgreSQL](https://aws.amazon.com/rds/postgresql/)/sub>

17. **Reload your terminal** and run the following command in **terminal** to migrate remote database.

    ```
    python manage.py migrate
    ```

18. Replace `DEBUG=False` to `DEBUG=True` in the `.env` file.

19. Return to the [Heroku dashboard](https://dashboard.heroku.com/apps/wordnest) navigate to the **Settings** tab and click on **Reveal Config Var** and add `DATABASE_URL` environment variable.

20. Install [whitenoise](https://pypi.org/project/whitenoise/) to manage static files on production server.

    ```
    pip install whitenoise
    ```

21. Add `whitenoise` to the `MIDDLEWARE` list in the `settings.py`.

    ```python
    MIDDLEWARE = [
        "django.middleware.security.SecurityMiddleware",
        'whitenoise.middleware.WhiteNoiseMiddleware',
    ]
    ```

    <sub>**Note**: The WhiteNoise middleware must be placed directly after the Django `SecurityMiddleware`</sub>

22. Add `STATIC_ROOT` and `STORAGES` variables to the `settings.py`.

    ```python
    STORAGES = {
        "staticfiles": {
            "BACKEND": "whitenoise.storage.CompressedManifestStaticFilesStorage",
        },
    }
    STATIC_ROOT = BASE_DIR.joinpath("staticfiles")
    ```

23. Run the following command in **terminal** to collect static files.

    ```
    python manage.py collectstatic
    ```

24. From the terminal, check the Python version used in your IDE.

    ```
    python --version
    ```

25. Look up the [supported runtimes here](https://devcenter.heroku.com/articles/python-support#specifying-a-python-version) and copy the runtime closest to the one used in your IDE.

26. Add a `runtime.txt` file to your app's root directory.

27. Paste the copied runtime into the `runtime.txt` file.

28. Update `requirements.txt`.

    ```
    pip freeze > requirements.txt
    ```

29. Add and commit all changes to the repository.

    ```
    git add .
    git commit -m "Deploying to Heroku"
    ```

30. Push the changes to your remote branch that you intend to deploy.

    ```
    git push
    ```

31. On the [Heroku dashboard](https://dashboard.heroku.com/apps), and in your app, click on the **Deploy** tab.

32. In the **Deployment method** section enable GitHub integration by clicking on **Connect to GitHub**.

33. Start typing your project repo name into the search box and click **Search**. A list of repositories from your GitHub account should appear. Click on the GitHub repo you want to deploy from.

34. Scroll to the bottom of the page in the **Manual deploy** section, choose branch you want to deploy and click **Deploy Branch** to start a manual deployment of the branch.

35. Open the **Resources** tab and choose an eco dyno. This dyno is a lightweight container to run your project.

36. Verify there is no existing Postgres database **add-on**. if there is a database add-on select **Delete Add-on** to remove it.

37. Click on **Open app** to view your deployed project.

[Back to the top](#table-of-contents)

## Fork GitHub Repo

[Back to the top](#table-of-contents)

## Clone GitHub Repo

[Back to the top](#table-of-contents)

# Credits

## Media

[Back to the top](#table-of-contents)

## Design Template

-   [Animated burger menu](https://codepen.io/ainalem/pen/GeMqdP)

[Back to the top](#table-of-contents)

## Code

-   [Implementing infinite scroll in Django with htmx](https://medium.com/@franciscovcbm/infinite-scroll-with-django-and-htmx-27f61cfaf911)

-   [Dynamic messages with HTMX and Alpine.js](https://danjacob.net/posts/htmx_messages/)

[Back to the top](#table-of-contents)

## Acknowledgements

[Back to the top](#table-of-contents)
